<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lost and Found</title>
  
  <!-- PWA Meta Tags -->
  <meta name="description" content="Find and post lost items in your community">
  <meta name="theme-color" content="#A4C3A2">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Lost&Found">
  <meta name="mobile-web-app-capable" content="yes">
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">
  
  <!-- App Icons -->
  <link rel="icon" type="image/jpeg" href="/icons/favicon.jpeg">
  <link rel="icon" type="image/jpeg" sizes="192x192" href="/icons/icon-192x192.jpeg">
  <link rel="apple-touch-icon" href="/icons/icon-192x192.jpeg">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.jpeg">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.jpeg">
  <link rel="apple-touch-icon" sizes="128x128" href="/icons/icon-128x128.jpeg">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="pwa.css" />
</head>
<body>
  <h1 style="text-align:center; margin-top: 32px; margin-bottom: 0.5em; color: #1a2233; font-size: 2.1rem; font-weight: 700; letter-spacing: -1px;">Lost and Found</h1>
  <div id="tab-content">
    <div id="aboutTab" class="tab-section" style="display:none;">
      <div class="about-minimal">
        <div class="about-hero">
          <div class="hero-logo">
            <img src="logo.jpeg" alt="Lost and Found Logo" />
          </div>
          <h2>Lost & Found</h2>
          <p class="hero-subtitle">Bringing lost items home</p>
        </div>

        <div class="about-cards">
          <div class="about-card">
            <div class="card-icon">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
              </svg>
            </div>
            <h3>Purpose</h3>
            <p>A dedicated platform for Krishna Engineering College students to reconnect with their lost belongings.</p>
          </div>

          <div class="about-card">
            <div class="card-icon">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
              </svg>
            </div>
            <h3>Features</h3>
            <p>Progressive Web App with photo uploads, real-time updates, and seamless mobile experience.</p>
          </div>

          <div class="about-card author-card">
            <div class="card-icon">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
            </div>
            <h3>Created by</h3>
            <div class="author-info">
              <p class="author-name">Humaira Ambreen</p>
              <p class="author-college">Krishna Engineering College</p>
              <a href="https://humairaambreen.github.io/" target="_blank" class="portfolio-link">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                  <polyline points="15,3 21,3 21,9"></polyline>
                  <line x1="10" y1="14" x2="21" y2="3"></line>
                </svg>
                Visit Portfolio
              </a>
            </div>
          </div>
        </div>

        <div class="about-footer">
          <p>Made with 
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" stroke="none">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            for KEC students
          </p>
        </div>
      </div>
    </div>
    <div id="feedTab" class="tab-section">
      
      <div id="feed"></div>
      <div id="end-of-feed" class="end-of-feed">This is the end of the feed</div>
    </div>
    <div id="chatTab" class="tab-section chat-tab-fullscreen" style="display:none;">
      <h1 class="chat-header-title" id="chatHeaderTitle">Lost and Found</h1>
      
      <!-- Chat Header Menu -->
      <div id="chatHeaderMenu" class="chat-header-menu" style="display: none;">
        <div class="menu-item" id="leaveChatMenuItem">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
            <polyline points="16,17 21,12 16,7"/>
            <line x1="21" y1="12" x2="9" y2="12"/>
          </svg>
          Leave Chat
        </div>
        <div class="menu-item" id="clearChatMenuItem">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="3,6 5,6 21,6"/>
            <path d="m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"/>
            <line x1="10" y1="11" x2="10" y2="17"/>
            <line x1="14" y1="11" x2="14" y2="17"/>
          </svg>
          Clear Messages
        </div>
      </div>
      
      <div id="chatContainer" class="chat-container">
        <div id="namePrompt" class="name-prompt" style="display:flex;">
          <h3>Welcome to Public Chat!</h3>
          <p>Enter your name to start chatting with the community:</p>
          <div class="name-input-container">
            <input type="text" id="chatName" placeholder="Your Name" maxlength="30" />
            <button id="joinChatBtn" type="button">Join Chat</button>
          </div>
        </div>
        <div id="chatInterface" class="chat-interface" style="display:none;">
          <div id="chatMessages" class="chat-messages"></div>
          <div class="chat-input-container">
            <button id="imageUploadBtn" type="button" class="image-upload-btn" aria-label="Send Image">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                <circle cx="9" cy="9" r="2"/>
                <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
              </svg>
            </button>
            <input type="file" id="chatImageInput" accept="image/*" style="display: none;" />
            <input type="text" id="chatMessageInput" placeholder="Type your message..." maxlength="500" />
            <button id="sendMessageBtn" type="button">Send</button>
          </div>
        </div>
        
        <!-- Leave Chat Confirmation Modal -->
        <div id="leaveChatModal" class="modal-overlay" style="display: none;">
          <div class="modal-content">
            <div class="modal-header">
              <h3>Leave Chat?</h3>
            </div>
            <div class="modal-body">
              <p>Are you sure you want to leave the chat? You'll need to enter your name again to rejoin.</p>
            </div>
            <div class="modal-actions">
              <button id="cancelLeaveBtn" class="modal-btn cancel-btn">Cancel</button>
              <button id="confirmLeaveBtn" class="modal-btn confirm-btn">Leave</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="uploadTab" class="tab-section" style="display:none;">
      <form id="itemForm">
        <input type="text" id="name" placeholder="Your Name" required />
        <input type="text" id="number" placeholder="Your Number" required />
        <textarea id="description" placeholder="Item Description" required></textarea>
        <div class="upload-box">
          <input type="file" id="photo" accept="image/*" required style="display:none;" />
          <label for="photo" class="upload-label">
            <span class="upload-text">Select Image</span>
          </label>
          <div class="preview-wrapper" style="display:none;">
            <img id="photoPreview" class="upload-preview" src="" alt="Preview" />
            <button type="button" id="closePreview" class="close-preview" aria-label="Discard image">&times;</button>
          </div>
        </div>
        <button type="submit">Submit Item</button>
      </form>
    </div>
  </div>
  <nav class="bottom-tabs">
    <button class="tab-btn" id="aboutTabBtn" aria-label="About"><span>About</span></button>
    <button class="tab-btn active" id="feedsTabBtn" aria-label="Feeds"><span>Feeds</span></button>
    <button class="tab-btn" id="chatTabBtn" aria-label="Chat"><span>Chat</span></button>
    <button class="tab-btn" id="uploadTabBtn" aria-label="Upload"><span>Upload</span></button>
  </nav>
  <script>
    // Tab switching logic
    const aboutTabBtn = document.getElementById('aboutTabBtn');
    const feedsTabBtn = document.getElementById('feedsTabBtn');
    const chatTabBtn = document.getElementById('chatTabBtn');
    const uploadTabBtn = document.getElementById('uploadTabBtn');
    const aboutTab = document.getElementById('aboutTab');
    const feedTab = document.getElementById('feedTab');
    const chatTab = document.getElementById('chatTab');
    const uploadTab = document.getElementById('uploadTab');
    
    // About tab
    aboutTabBtn.onclick = () => {
      aboutTabBtn.classList.add('active');
      feedsTabBtn.classList.remove('active');
      chatTabBtn.classList.remove('active');
      uploadTabBtn.classList.remove('active');
      aboutTab.style.display = '';
      feedTab.style.display = 'none';
      chatTab.style.display = 'none';
      uploadTab.style.display = 'none';
    };
    
    // Feeds tab
    feedsTabBtn.onclick = () => {
      feedsTabBtn.classList.add('active');
      aboutTabBtn.classList.remove('active');
      chatTabBtn.classList.remove('active');
      uploadTabBtn.classList.remove('active');
      feedTab.style.display = '';
      aboutTab.style.display = 'none';
      chatTab.style.display = 'none';
      uploadTab.style.display = 'none';
    };
    
    // Chat tab
    chatTabBtn.onclick = () => {
      chatTabBtn.classList.add('active');
      aboutTabBtn.classList.remove('active');
      feedsTabBtn.classList.remove('active');
      uploadTabBtn.classList.remove('active');
      chatTab.style.display = '';
      aboutTab.style.display = 'none';
      feedTab.style.display = 'none';
      uploadTab.style.display = 'none';
    };
    
    // Upload tab
    uploadTabBtn.onclick = () => {
      uploadTabBtn.classList.add('active');
      aboutTabBtn.classList.remove('active');
      feedsTabBtn.classList.remove('active');
      chatTabBtn.classList.remove('active');
      uploadTab.style.display = '';
      aboutTab.style.display = 'none';
      feedTab.style.display = 'none';
      chatTab.style.display = 'none';
    };
  </script>
  
  <!-- Image Overlay -->
  <div id="imageOverlay" class="image-overlay">
    <div class="image-overlay-content">
      <img id="overlayImage" src="" alt="Enlarged image" />
    </div>
    <button class="image-overlay-close" id="closeImageOverlay">&times;</button>
  </div>
  
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
  <script src="pwa.js"></script>
  <script src="app.js"></script>
  <script src="chat.js"></script>
</body>
</html>
